<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Objects, Methods</title>
    <meta name="viewport" content="width=device-width">

    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500|Raleway:400' rel='stylesheet' type='text/css'>

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/blog/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/blog/css/main.css">
  </head>
  <body>
    <div class="container">
      <div class="site">
        <div class="header">
          <h1 class="title"><a href="/blog/">Nitish's Blog</a></h1>
        </div>

        <div class="post-header">
  <div>Objects, Methods</div>
  <p class="meta">13 Jan 2014</p>
</div>

<div class="post">
  <p>This week I learnt about some basics of objects and methods in Ruby, Here is the summary.</p>

<p>Depending on your Ruby version, the root of Ruby class hierarchy is <strong>Object</strong> or <strong>BasicObject</strong>. BasicObject was introduced in Ruby 1.9 and is parent of Object class. BasicObject is stripped down version of Object and contains very few methods. You can inherit from BasicObject to create class hierarchies independent of Ruby&#8217;s built in hierarchy. For the rest of this blog post I will focus on Object and its descendants.</p>

<p>Each object has an unique object id. You can get an object&#8217;s id using <code>object_id</code> or <code>__id__</code> methods. In standard Ruby (MRI), object id is same as VALUE which represents objects at C level. You may notice that object ids of true, false, nil and fixnums are constant across multiple runs. This is because of some clever performance optimization in MRI. You can read more about them <a href='http://stackoverflow.com/questions/3430280/ruby-how-does-object-id-assignment-work'>here</a>, <a href='http://www.oreillynet.com/ruby/blog/2006/01/the_ruby_value_1.html'>here</a> and <a href='http://www.oreillynet.com/ruby/blog/2006/02/ruby_values_and_object_ids.html'>here</a></p>

<p>Variables act as containers for object. Usually they store references to objects, so you have to be careful while manipulating objects. Consider the following example:</p>
<div class='highlight'><pre><code class='ruby'><span class='o'>&gt;&gt;</span> <span class='n'>a</span> <span class='o'>=</span> <span class='s2'>&quot;one&quot;</span>
<span class='o'>&gt;&gt;</span> <span class='n'>b</span> <span class='o'>=</span> <span class='n'>a</span> <span class='c1'># copies content of variable, i.e. reference, not the actual object</span>
<span class='o'>&gt;&gt;</span> <span class='nb'>puts</span> <span class='n'>a</span><span class='p'>,</span> <span class='n'>b</span>
<span class='n'>one</span>
<span class='n'>one</span>
<span class='o'>&gt;&gt;</span> <span class='n'>a</span><span class='o'>.</span><span class='n'>replace</span><span class='p'>(</span><span class='s2'>&quot;two&quot;</span><span class='p'>)</span> <span class='c1'># method is called on the actual object</span>
<span class='o'>&gt;&gt;</span> <span class='nb'>puts</span> <span class='n'>b</span>
<span class='o'>=&gt;</span> <span class='s2'>&quot;two&quot;</span>
</code></pre></div>
<p>Some objects in Ruby (symbols, fixnums, false, true and nil) are stored directly in variables. When you assign one of these objects to a variable, variable stores the value itself rather than a reference. Regardless of this distinction, assignment statement always overwrites variables with whatever is there to the right of the <code>=</code> sign.</p>

<p>If you want to protect an object from being manipulated, invoke <code>freeze()</code> method on that object. Any attempts to modify a frozen object will result in runtime error. There is no way to unfreeze an object. If you wish to modify frozen object, you will have to create a copy of the object using <code>dup()</code> method and then manipulate it.</p>

<p>A method in Ruby may accept variables when called. Variables specified in method definition are called as formal parameters of the method and the values you supply while calling the method are called its arguments. When a method is called, the arguments passed to it are assigned to local variables which are visible inside method definition.</p>

<p>Methods in Ruby can take variable number of arguments using splat <code>(*)</code> operator and/or default values. When a method is called, Ruby tries to assign values to required parameters first and then to default valued parameters. If any arguments are left, they are packed into an array and assigned to the splat parameter otherwise the splat parameter is assigned an empty array <code>[]</code>. If number of arguments supplied is less than the number of required parameters, ArgumentError is raised. Splat operator can also be used while calling a method to unpack array.</p>
<div class='highlight'><pre><code class='ruby'><span class='o'>&gt;&gt;</span> <span class='k'>def</span> <span class='nf'>mix_and_match</span><span class='p'>(</span><span class='n'>a</span><span class='p'>,</span> <span class='n'>b</span><span class='o'>=</span><span class='mi'>1</span><span class='p'>,</span> <span class='o'>*</span><span class='n'>c</span><span class='p'>,</span> <span class='n'>d</span><span class='p'>)</span>
<span class='o'>&gt;&gt;</span>   <span class='nb'>p</span> <span class='n'>a</span><span class='p'>,</span> <span class='n'>b</span><span class='p'>,</span> <span class='n'>c</span><span class='p'>,</span> <span class='n'>d</span>
<span class='o'>&gt;&gt;</span> <span class='k'>end</span>

<span class='o'>&gt;&gt;</span> <span class='n'>mix_and_match</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>)</span>
<span class='mi'>1</span>
<span class='mi'>1</span>
<span class='o'>[]</span>
<span class='mi'>2</span>

<span class='o'>&gt;&gt;</span> <span class='n'>mix_and_match</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='p'>)</span>
<span class='mi'>1</span>
<span class='mi'>2</span>
<span class='o'>[]</span>
<span class='mi'>3</span>

<span class='o'>&gt;&gt;</span> <span class='n'>mix_and_match</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='p'>,</span> <span class='mi'>4</span><span class='p'>,</span> <span class='mi'>5</span><span class='p'>)</span>
<span class='mi'>1</span>
<span class='mi'>2</span>
<span class='o'>[</span><span class='mi'>3</span><span class='p'>,</span> <span class='mi'>4</span><span class='o'>]</span>
<span class='mi'>5</span>

<span class='o'>&gt;&gt;</span> <span class='n'>mix_and_match</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='o'>*[</span><span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='o'>]</span><span class='p'>,</span> <span class='mi'>4</span><span class='p'>,</span> <span class='mi'>5</span><span class='p'>)</span>
<span class='mi'>1</span>
<span class='mi'>2</span>
<span class='o'>[</span><span class='mi'>3</span><span class='p'>,</span> <span class='mi'>4</span><span class='o'>]</span>
<span class='mi'>5</span>
</code></pre></div>
<p>The optional parameters have to occur in the middle only. You can have required parameters on either side or both sides only. Also, you can have only one parameter with splat operator and you can&#8217;t put it to the left of any default valued parameter.</p>
<div class='highlight'><pre><code class='ruby'><span class='k'>def</span> <span class='nf'>example</span><span class='p'>(</span><span class='n'>a</span><span class='p'>,</span> <span class='n'>b</span><span class='o'>=</span><span class='mi'>1</span><span class='p'>,</span> <span class='n'>c</span> <span class='p'>,</span> <span class='o'>*</span><span class='n'>d</span><span class='p'>,</span> <span class='n'>e</span><span class='p'>)</span> <span class='c1'># invalid, required parameter in the middle</span>
<span class='k'>def</span> <span class='nf'>example</span><span class='p'>(</span><span class='n'>a</span><span class='p'>,</span> <span class='o'>*</span><span class='n'>c</span> <span class='p'>,</span> <span class='o'>*</span><span class='n'>d</span><span class='p'>,</span> <span class='n'>e</span><span class='p'>)</span> <span class='c1'># invalid, more than one splat parameter</span>
<span class='k'>def</span> <span class='nf'>example</span><span class='p'>(</span><span class='n'>a</span><span class='p'>,</span><span class='o'>*</span><span class='n'>b</span><span class='p'>,</span><span class='n'>c</span><span class='o'>=</span><span class='mi'>1</span><span class='p'>)</span> <span class='c1'># invalid, splat parameter to the left of default valued</span>
</code></pre></div>
<p>Ruby 2.0 introduces keyword arguments and double splat operator.</p>
<div class='highlight'><pre><code class='ruby'><span class='o'>&gt;&gt;</span><span class='k'>def</span> <span class='nf'>foo</span><span class='p'>(</span><span class='ss'>str</span><span class='p'>:</span> <span class='s2'>&quot;foo&quot;</span><span class='p'>,</span> <span class='ss'>num</span><span class='p'>:</span> <span class='mi'>42</span><span class='p'>,</span> <span class='o'>**</span><span class='n'>options</span><span class='p'>)</span>
<span class='o'>&gt;&gt;</span>  <span class='nb'>p</span> <span class='n'>str</span><span class='p'>,</span> <span class='n'>num</span><span class='p'>,</span> <span class='n'>options</span>
<span class='o'>&gt;&gt;</span><span class='k'>end</span>

<span class='o'>&gt;&gt;</span><span class='n'>foo</span>
<span class='s1'>&#39;foo&#39;</span>
<span class='mi'>42</span>
<span class='p'>{}</span>

<span class='o'>&gt;&gt;</span><span class='n'>foo</span><span class='p'>(</span><span class='ss'>check</span><span class='p'>:</span> <span class='kp'>true</span><span class='p'>)</span>
<span class='s1'>&#39;foo&#39;</span>
<span class='mi'>42</span>
<span class='p'>{</span><span class='ss'>check</span><span class='p'>:</span> <span class='kp'>true</span><span class='p'>}</span>
</code></pre></div>
<p>That&#8217;s it for this week.</p>
</div>

<hr id="comments-seperator">


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'nitishsp';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>No JS, No comments!</noscript>


      </div>
    </div> <!-- /container -->
  </body>
</html>
